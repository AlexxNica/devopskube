<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="DevOpsKube Team">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Setup Jenkins SSO - DevOpsKube</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Setup Jenkins SSO";
    var mkdocs_page_input_path = "setup/jenkins-keycloak.md";
    var mkdocs_page_url = "/setup/jenkins-keycloak/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-85985871-1', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> DevOpsKube</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Setup</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../single-node/">Setup Single Node</a>
                </li>
                <li class="">
                    
    <a class="" href="../helm/">Setup Helm</a>
                </li>
                <li class="">
                    
    <a class="" href="../redmine-keycloak/">Setup Redmine SSO</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Setup Jenkins SSO</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#jenkins-sso">Jenkins SSO</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#keycloak-settings">Keycloak Settings</a></li>
        
            <li><a class="toctree-l4" href="#jenkins-openid-connect-settings">Jenkins OpenId Connect Settings</a></li>
        
            <li><a class="toctree-l4" href="#hints">Hints</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Components</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../components/gogs/">Gogs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../components/jenkins/">Jenkins</a>
                </li>
                <li class="">
                    
    <a class="" href="../../components/keycloak/">Keycloak</a>
                </li>
                <li class="">
                    
    <a class="" href="../../components/kube-lego/">Kube-Lego</a>
                </li>
                <li class="">
                    
    <a class="" href="../../components/mysql/">MySQL</a>
                </li>
                <li class="">
                    
    <a class="" href="../../components/nexus/">TheNexus</a>
                </li>
                <li class="">
                    
    <a class="" href="../../components/redmine/">Redmine</a>
                </li>
                <li class="">
                    
    <a class="" href="../../components/sonarqube/">SonarQube</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">About</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../about/license/">License</a>
                </li>
                <li class="">
                    
    <a class="" href="../../about/team/">Team</a>
                </li>
                <li class="">
                    
    <a class="" href="../../about/release-notes/">Release Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../about/roadmap/">Roadmap</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DevOpsKube</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Setup &raquo;</li>
        
      
    
    <li>Setup Jenkins SSO</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/devopskube/devopskube/edit/master/docs/setup/jenkins-keycloak.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="jenkins-sso">Jenkins SSO</h1>
<p>To provide SSO Services in our environemnt, we do use <a href="http://www.keycloak.org/">Keycloak</a> as the central service. To use this in <a href="http://www.jenkins.io/">Jenkins</a>, we do use the <a href="https://github.com/jenkinsci/oic-auth-plugin">OpenId Connect Plugin</a>.</p>
<p>For this to work, a new client has to be created in the Keycloak System, and a couple of endpoints have to be configured in the Jenkins Security Settings.</p>
<h2 id="keycloak-settings">Keycloak Settings</h2>
<p>All Settings done in the Keycloak Server are described in this section.</p>
<h3 id="keycloak-client">Keycloak Client</h3>
<p>The Keycloak client needs to get configured in the following way. The Client needs to have a unique name (in this case 'jenkins') and the 'Access Type' needs to get defined as 'confidential'. Please note especially the 'Valid Redirect URIs', which needs to get set to the URL of the Jenkins System (http://loccalhost:3000 in the screenshot).</p>
<p><img alt="Keycloak Jenkins Client" src="../../assets/jenkins_sso/keycloak_client.png" /></p>
<h3 id="keycloak-credentials">Keycloak Credentials</h3>
<p>Because we have set the 'Access Type' to 'confidential' we do get offered the Credentials Tab. On this tab, we get a secret, which needs to get put into the corresponding Setting of the Jenkins OpenId Connect plugin. This secret allows to initiate a secure connection between the Keycloak System and your client application (Jenkins in this case).</p>
<p><img alt="Keycloak Credentials" src="../../assets/jenkins_sso/keycloak_client_credentials.png" /></p>
<h3 id="keycloak-mappers">Keycloak Mappers</h3>
<p>In order to provide some necessary user information to the Redmine System, the standard Keycloak Mappers have to be adopted and a new Mapper has to get created.</p>
<p><img alt="Keycloak Mapper" src="../../assets/redmine_sso/keycloak_mappers.png" /></p>
<h2 id="jenkins-openid-connect-settings">Jenkins OpenId Connect Settings</h2>
<p>The Settings done in the OpenId Connect Plugin Settings page are described in here.</p>
<p>The most relevant settings are the 'Client ID', the 'Client Secret' and the 'Urls'.</p>
<p>The 'Client ID' is the name of the client in your Keycloak System (jenkins in our case). By Specification, this should be a URI, but a plain name is working as well, and seems to be easier IMHO.</p>
<p>The 'Urls' have to be set to the Keycloak Server with the path /auth/realms/<REALMNAME>. Please adopt the REALMNAME (devopskube in the picture), to your own needs.</p>
<p>The 'Client Secret' is the secret found in the Keycloak Credentials page (see above), and should be copied from there.</p>
<p><img alt="Jenkins OpenId Connect Plugin Settings" src="../../assets/jenkins_sso/jenkins_openid_plugin_setting.png" /></p>
<h2 id="hints">Hints</h2>
<p>To retrieve the Keycloak Endpoints, you can use the Url https://KEYCLOAK_SERVER/auth/realms/<REALMNAME>/.well-known/openid-configuration.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../components/gogs/" class="btn btn-neutral float-right" title="Gogs">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../redmine-keycloak/" class="btn btn-neutral" title="Setup Redmine SSO"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>(c) 2016- by the DevOpsKube Team</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/devopskube/devopskube/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../redmine-keycloak/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../components/gogs/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
